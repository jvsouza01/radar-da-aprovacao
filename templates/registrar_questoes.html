<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrar Questões - Radar da Aprovação</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
    <h1>Registrar Desempenho (Questões)</h1>

    <div class="container" style="gap: 40px;">
        <section class="form-section" style="flex: 1;">
            <h2>Novo Registro</h2>
            <form id="registro-form">
                {% if usuario and usuario.tipo_usuario == 'admin' %}
                <!-- Admin vê o dropdown completo -->
                <label for="aluno-select">Aluno:</label>
                <select id="aluno-select" name="aluno_id" required>
                    <option value="">Carregando...</option>
                </select>
                {% else %}
                <!-- Aluno vê apenas seu nome (sem seleção) -->
                <label>Aluno:</label>
                <input type="text" value="{{ usuario.nome if usuario else '' }}" readonly
                    style="background: #333; cursor: not-allowed;">
                <input type="hidden" id="aluno-select" name="aluno_id" value="{{ usuario.id if usuario else '' }}">
                {% endif %}

                <label for="questoes-input">Quantidade de Questões:</label>
                <input type="number" id="questoes-input" name="quantidade" min="1" required>

                <label for="acertos-input">Número de Acertos:</label>
                <input type="number" id="acertos-input" name="acertos" min="0" required>

                <button type="submit">Adicionar Registro</button>
            </form>
        </section>

        <section class="info-column" style="flex: 2;">
            <div class="recent-section">
                <h3>Últimos Lançamentos (Cuidado ao apagar!!)</h3>
                <ul id="ultimos-lancamentos">
                    <li>Carregando...</li>
                </ul>
            </div>
        </section>
    </div>

    <a href="/" style="display: block; text-align: center; margin-top: 30px; font-weight: bold;">Voltar para os
        Rankings</a>

    <script>
        // Informações do usuário logado
        const usuarioAtual = {
            id: {{ usuario.id if usuario else 'null' }},
        nome: "{{ usuario.nome if usuario else '' }}",
            tipo: "{{ usuario.tipo_usuario if usuario else '' }}"
        };
    </script>
    <script src="{{ url_for('static', filename='registrar_questoes.js') }}"></script>
</body>

</html>